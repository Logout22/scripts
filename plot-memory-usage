#! /bin/sh

usage() {
    echo "Usage: $0 <input_file.log> <output_file.svg>"
    echo "Plots the memory usage graph generated by log-memory-usage to SVG."
    exit 1
}

if ! which gnuplot > /dev/null; then
    echo "This script requires 'gnuplot' to create its plotted output image."
    echo "Please install gnuplot on your system. Exiting."
    exit 1
fi

[ "x$1" != "x" -a "x$2" != "x" ] || usage

gnuplot <<COMMANDS
set terminal svg size 1920,1080
set output "$2"
set xlabel 'Run Time in Milliseconds'
set ylabel 'Memory Usage (RSS) in KiB'
plot "$1"
quit
COMMANDS
